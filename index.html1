<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdGuard Pro | YouTube Adblocker</title>
    <style>
        /* --- CSS Variables & Reset --- */
        :root {
            --bg-dark: #0f0f12;
            --card-bg: #1a1a1f;
            --primary: #00f2ff; /* Cyan Neon */
            --primary-dim: rgba(0, 242, 255, 0.1);
            --danger: #ff2a6d;
            --text-main: #ffffff;
            --text-sec: #8b8b93;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: var(--font-family);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-image: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #0f0f12 100%);
        }

        /* --- Main Card --- */
        .app-container {
            background: rgba(26, 26, 31, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 40px;
            width: 90%;
            max-width: 420px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 10;
            transition: transform 0.3s ease;
        }

        .logo-area {
            margin-bottom: 30px;
        }

        .shield-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), #00a8ff);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 0 30px var(--primary-dim);
            color: #000;
        }

        .shield-icon svg { width: 40px; height: 40px; fill: currentColor; }

        h1 { font-size: 24px; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.5px; }
        p.subtitle { color: var(--text-sec); font-size: 14px; line-height: 1.5; margin-bottom: 30px; }

        /* --- Advanced Toggle Switch --- */
        .control-panel {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 25px;
        }

        .switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .status-label {
            text-align: left;
        }
        .status-label span { display: block; }
        .status-title { font-weight: 600; font-size: 16px; }
        .status-desc { font-size: 12px; color: var(--text-sec); margin-top: 4px; transition: color 0.3s; }

        /* The Toggle Switch CSS */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 32px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        input:checked + .slider { background-color: var(--primary); box-shadow: 0 0 15px var(--primary-dim); }
        input:checked + .slider:before { transform: translateX(28px); }

        /* Active State Indicators */
        .control-panel.active .status-desc { color: var(--primary); }
        .control-panel.active { border-color: var(--primary-dim); }

        /* --- Logs / Terminal --- */
        .terminal {
            text-align: left;
            background: #000;
            padding: 15px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #555;
            height: 100px;
            overflow-y: auto;
            border: 1px solid #222;
            margin-bottom: 20px;
        }
        .log-line { margin-bottom: 4px; }
        .log-line.success { color: var(--primary); }
        .log-line.error { color: var(--danger); }
        .log-line.info { color: #aaa; }

        /* --- Floating Widget --- */
        #floatingWidget {
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 60px;
            height: 60px;
            background: var(--card-bg);
            border-radius: 50%;
            display: none; /* Hidden initially */
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 2147483647;
            cursor: pointer;
            border: 2px solid var(--primary);
            transition: transform 0.2s;
            animation: floatUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #floatingWidget:active { transform: scale(0.9); }
        
        @keyframes floatUp {
            from { transform: translateY(100px) scale(0); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        #widgetIcon { width: 28px; height: 28px; fill: var(--primary); }
        .pulse-ring {
            position: absolute;
            width: 100%; height: 100%;
            border-radius: 50%;
            border: 2px solid var(--primary);
            animation: ripple 2s infinite;
        }
        @keyframes ripple {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.6); opacity: 0; }
        }

        /* Quick Menu */
        #quickMenu {
            position: fixed;
            bottom: 100px;
            right: 25px;
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 8px;
            display: none;
            flex-direction: column;
            gap: 5px;
            z-index: 2147483647;
            width: 180px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .menu-item {
            padding: 10px 15px;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .menu-item:hover { background: rgba(255,255,255,0.1); }
        .menu-item.danger { color: var(--danger); }
        .menu-icon { width: 16px; height: 16px; fill: currentColor; }

    </style>
</head>
<body>

    <!-- Main Dashboard -->
    <div class="app-container">
        <div class="logo-area">
            <div class="shield-icon">
                <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
            </div>
            <h1>AdGuard Pro</h1>
            <p class="subtitle">Advanced YouTube Ad Blocker System<br>Hosted on Secure Network</p>
        </div>

        <div class="control-panel" id="controlPanel">
            <div class="switch-container">
                <div class="status-label">
                    <span class="status-title">Protection</span>
                    <span class="status-desc" id="statusText">System Inactive</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="mainToggle" onchange="toggleSystem()">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="terminal" id="terminal">
            <div class="log-line info">> System initialized...</div>
            <div class="log-line info">> Waiting for user input...</div>
        </div>

        <p style="font-size: 12px; color: #555;">v2.0.4 | Secure Connection</p>
    </div>

    <!-- Floating Widget (Visible everywhere) -->
    <div id="floatingWidget" onclick="toggleMenu(event)">
        <div class="pulse-ring"></div>
        <svg id="widgetIcon" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
    </div>

    <!-- Quick Menu -->
    <div id="quickMenu">
        <div class="menu-item" onclick="toggleSystem()">
            <svg class="menu-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
            Toggle Status
        </div>
        <div class="menu-item" onclick="addLog('System is active and blocking ads.', 'success')">
            <svg class="menu-icon" viewBox="0 0 24 24"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/></svg>
            Check Status
        </div>
        <div class="menu-item danger" onclick="location.reload()">
            <svg class="menu-icon" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            Reset System
        </div>
    </div>

    <script>
        // --- Core Logic ---
        const toggle = document.getElementById('mainToggle');
        const panel = document.getElementById('controlPanel');
        const statusText = document.getElementById('statusText');
        const widget = document.getElementById('floatingWidget');
        const menu = document.getElementById('quickMenu');
        const terminal = document.getElementById('terminal');
        
        let isActive = false;
        let registration = null;

        // Logging System
        function addLog(msg, type = 'info') {
            const time = new Date().toLocaleTimeString([], { hour12: false });
            const div = document.createElement('div');
            div.className = `log-line ${type}`;
            div.textContent = `[${time}] ${msg}`;
            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Toggle Menu
        function toggleMenu(e) {
            e.stopPropagation();
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
        }
        document.addEventListener('click', () => menu.style.display = 'none');

        // Service Worker Code
        const swCode = `
            self.addEventListener('install', e => self.skipWaiting());
            self.addEventListener('activate', e => e.waitUntil(clients.claim()));

            self.addEventListener('fetch', e => {
                const url = new URL(e.request.url);
                
                // Block Ad Domains & Paths
                if (url.hostname.includes('doubleclick.net') || 
                    url.hostname.includes('googleads.g.doubleclick.net') ||
                    url.hostname.includes('googlesyndication.com') ||
                    url.hostname.includes('googleadservices.com') ||
                    url.pathname.includes('/pagead/') || 
                    url.pathname.includes('/ads/')) {
                    
                    e.respondWith(new Response('', { status: 204, statusText: 'Blocked' }));
                }
            });
        `;

        // Main Toggle Function
        async function toggleSystem() {
            if (!isActive) {
                // Activate
                if ('serviceWorker' in navigator) {
                    try {
                        const blob = new Blob([swCode], { type: 'application/javascript' });
                        const swUrl = URL.createObjectURL(blob);
                        
                        addLog('Registering Service Worker...', 'info');
                        registration = await navigator.serviceWorker.register(swUrl);
                        await navigator.serviceWorker.ready;

                        // UI Updates
                        isActive = true;
                        panel.classList.add('active');
                        statusText.textContent = "System Active â€¢ Blocking Ads";
                        statusText.style.color = "var(--primary)";
                        toggle.checked = true;
                        
                        widget.style.display = 'flex';
                        addLog('System successfully deployed!', 'success');
                        addLog('Ad interception protocols active.', 'success');

                    } catch (err) {
                        addLog('Error: ' + err.message, 'error');
                        toggle.checked = false;
                        alert("Failed to start. Please ensure you are using HTTPS or Localhost.");
                    }
                } else {
                    alert("Browser not supported.");
                }
            } else {
                // Deactivate
                if (registration) await registration.unregister();
                
                isActive = false;
                panel.classList.remove('active');
                statusText.textContent = "System Inactive";
                statusText.style.color = "var(--text-sec)";
                toggle.checked = false;
                widget.style.display = 'none';
                menu.style.display = 'none';
                
                addLog('System shut down.', 'info');
            }
        }
    </script>
</body>
</html>
